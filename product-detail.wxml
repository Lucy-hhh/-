<!--pages/product-detail/product-detail.wxml-->
<view class="container">
  <!-- 顶部导航栏 -->
  <view class="nav-bar">
    <view class="nav-back" bindtap="goBack">
      <text>←</text>
    </view>
    <text class="nav-title">商品详情</text>
    <view class="nav-placeholder"></view>
  </view>

  <!-- 商品名称 -->
  <view class="product-name-section">
    <text class="product-name">{{product.name}}</text>
  </view>

  <!-- 商品图片 -->
  <view class="product-image-container">
    <image class="product-image" src="{{product.image}}" mode="aspectFill"></image>
  </view>

  <!-- 文化背景与描述 -->
  <view class="info-card">
    <view class="tag-list">
      <text class="tag">非遗传承</text>
      <text class="tag">有机认证</text>
    </view>
    <text class="product-desc">{{product.description}}</text>
  </view>

  <!-- 价格信息 -->
  <view class="price-section">
    <view class="price-row">
      <view class="price-info">
        <text class="price-symbol">¥</text>
        <text class="price-value">{{totalPrice}}</text>
        <text class="price-unit">/ {{product.unit}}</text>
      </view>
      <!-- 数量选择 -->
      <view class="quantity-control">
        <button class="quantity-btn" bindtap="decreaseQuantity">-</button>
        <text class="quantity-value">{{quantity}}</text>
        <button class="quantity-btn" bindtap="increaseQuantity">+</button>
      </view>
    </view>
  </view>

  <!-- 规格参数 -->
  <view class="spec-card">
    <text class="spec-title">产品规格</text>
    <view class="spec-grid">
      <view class="spec-item">
        <text class="spec-label">产地</text>
        <text class="spec-value">{{product.origin}}</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">净含量</text>
        <text class="spec-value">{{product.weight}}</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">保质期</text>
        <text class="spec-value">{{product.shelfLife}}</text>
      </view>
      <view class="spec-item">
        <text class="spec-label">包装方式</text>
        <text class="spec-value">{{product.package}}</text>
      </view>
    </view>
  </view>

  <!-- 用户评论 -->
  <view class="comment-card">
    <text class="comment-title">用户评价</text>
    <view class="comment-list">
      <view class="comment-item" wx:for="{{comments}}" wx:key="id">
        <image class="comment-avatar" src="{{item.avatar}}" mode="aspectFill"></image>
        <view class="comment-content">
          <view class="comment-header">
            <text class="comment-name">{{item.name}}</text>
            <view class="rating-stars">
              <text wx:for="{{item.rating}}" wx:key="*this" wx:for-item="star">⭐</text>
            </view>
          </view>
          <text class="comment-text">{{item.text}}</text>
          <text class="comment-date">{{item.date}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 购买按钮组 -->
  <view class="buy-bar">
    <button class="buy-btn-primary" bindtap="buyNow">立即购买</button>
    <button class="buy-btn-secondary" bindtap="addToCart">加入购物车</button>
  </view>
</view>

